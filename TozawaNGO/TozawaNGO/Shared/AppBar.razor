@namespace TozawaNGO.Shared
@inject NavigationManager NavManager
@inherits BaseComponent
@using TozawaNGO.Helpers


<MudAppBar Elevation="3">
    <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" OnClick="ToggleSideBar" />
    @if (_showLogo)
    {
        <MudButton Link="/home" Color="Color.Inherit">
            <img src="/images/TR_Mini.png" asp-append-version="true" height="60px" width="150px" />
        </MudButton>
    }
    <MudSpacer />

    <MudText>
        <SystemText TextId=SystemTextId.ToZawaTitle FontFamily="cursive" FontSize="100%" SystemTextTypo=Typo.h2
            FallbackText="Svensk Förening för internationella arbete inom teknik och informatik"></SystemText>
    </MudText>

    <MudSpacer />
    <LanguageSelection />
    <AuthorizeView>
        <Authorized>
            <MudMenu TransformOrigin="@Origin.TopCenter" AnchorOrigin="Origin.BottomCenter">
                <ActivatorContent>
                    <MudImage Src="/images/profile_avatar.jpg" Alt="Profil avatar" Height="35" Width="35" Elevation="30"
                        Class="rounded-lg" />
                </ActivatorContent>
                <ChildContent>
                    <MudMenuItem>
                        <MudText>
                            <MudIcon class="text-icon" Icon="@Icons.Material.Filled.Person" Size="Size.Small"
                                Color="Color.Warning">
                            </MudIcon>
                            <SystemText TextId=SystemTextId.Hello FallbackText="Hello"></SystemText>
                            <b>@context.User.Identity.Name!</b>
                        </MudText>
                    </MudMenuItem>
                    <MudDivider />
                    <MudMenuItem>
                        <MudButton OnClick="@(()=>Logout())" Color="Color.Inherit">
                            <MudText>
                                <MudIcon class="text-icon" Icon="@Icons.Material.Filled.Logout" Size="Size.Small">
                                </MudIcon>
                                <SystemText TextId=SystemTextId.Logout FallbackText="Logout"></SystemText>
                            </MudText>
                        </MudButton>
                    </MudMenuItem>
                </ChildContent>
            </MudMenu>
        </Authorized>
        <NotAuthorized>
            <MudTooltip Class="pa-0 ma-0 opaque">
                <ChildContent>
                    <MudIconButton Icon="@Icons.Material.Filled.Person" Color="Color.Inherit"
                        OnClick="@(()=>Login())" />
                </ChildContent>
                <TooltipContent>
                    <SystemText TextId=SystemTextId.Login FallbackText="Login"></SystemText>
                </TooltipContent>
            </MudTooltip>
        </NotAuthorized>
    </AuthorizeView>
    @if (_isLightMode)
    {
        <MudIconButton Icon="@Icons.Material.Filled.Brightness4" Color="Color.Inherit" OnClick="ToggleTheme" />
    }
    else
    {
        <MudIconButton Icon="@Icons.Material.Filled.Brightness5" Color="Color.Inherit" OnClick="ToggleTheme" />
    }
</MudAppBar>